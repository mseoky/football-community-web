<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{{title}}</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
        <style>
            body {
                font-family: 'Roboto', sans-serif;
            }
        </style>
    </head>
    <body class="bg-gray-100">
        <div class="container mx-auto p-4">
            <header class="bg-blue-800 text-white text-center p-4 rounded-lg mb-6">
                <h1 class="text-3xl font-bold"><button onclick="redirectToHome()">FOOTBALL CAFE</button></h1>
                <p class="text-xl">축구 소식 및 일상 공유</p>
                <div class="mt-4">
                    <img src="https://e1.pxfuel.com/desktop-wallpaper/449/203/desktop-wallpaper-cr7-decisive-as-juve-beat-sassuolo-2-1-juventuscom-1400x933-for-your-mobile-tablet-ronaldo-celebration-computer.jpg" alt="Football Cafe Main Img" class="mx-auto">
                </div>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                {% if user and user.id %}
                <div class="bg-white p-4 rounded-lg shadow-md" style="height: 200px;">
                    <h2 class="text-lg font-bold mb-4">{{'안녕하세요! ' + user.nick + '님'}}</h2>
                    <input id="my-id" type="hidden" value="{{user.id}}">
                    <a id="write" href="/write"><button class="bg-yellow-300 text-black w-full py-2 rounded mb-4" style="background-color: #3B82F6; color: #FFFFFF;">카페 글 쓰기</button></a>
                    <form>
                        <a id="logout" href="/auth/logout"><button type="button" class="bg-gray-300 text-black w-full py-2 rounded">Log out</button></a>
                    </form>
                </div>
                {% else %}
                <div class="bg-white p-4 rounded-lg shadow-md" style="height: 300px;">
                    <h2 class="text-lg font-bold mb-4">Log in with E-mail</h2>
                    <form id="login-form" action="/auth/login" method="post">
                        <input id="email" type="email" name="email" placeholder="Email" class="border p-2 w-full mb-4 rounded" required autofocus>
                        <input id="password" type="password" name="password" placeholder="Password" class="border p-2 w-full mb-4 rounded" required>
                        <button id="login" type="submit" class="bg-blue-500 text-white w-full py-2 rounded mb-2">Log in</button>
                        <a id="join" href="/join"><button type="button" class="bg-gray-300 text-black w-full py-2 rounded">Sign up</button></a>
                    </form>
                </div>
                {% endif %}

                <div class="col-span-1 md:col-span-2">
                    {% block content %}
                    {% endblock %}
                </div>
            </div>
            
        </div>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script>
        function redirectToHome() {
             window.location.href = '/';
        }
        window.onload = () => {
            if (new URL(location.href).searchParams.get('error')) {
            alert(new URL(location.href).searchParams.get('error'));
            }
        };
        </script>
        {% block script %}
        {% endblock %}
    </body>
</html>